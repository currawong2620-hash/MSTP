# ARCHITECTURAL FOUNDATION
## Trading Platform — Interaction-Centric Architecture

**Status:** Foundation document  
**Scope:** Conceptual  
**Audience:** Architect, Master-Chat, Audit-Chat (orientation only)  
**This document is NOT normative.**

---

## 0. Назначение документа

Этот документ фиксирует **базовые архитектурные принципы**, на которых строится платформа.

Он отвечает на вопрос:

> **«Как мы вообще думаем о системе и её границах?»**

Документ:
- не описывает реализацию,
- не является законом,
- не используется напрямую для аудита.

Его цель — быть **интеллектуальным фундаментом** для нормативного документа SSP (Sacred System Pact).

---

## 1. Базовая проблема, которую решает архитектура

Основная системная проблема сложных торговых проектов —  
**потеря контроля над структурой по мере роста системы**.

Типовые симптомы:
- смешение ответственности модулей,
- рост неявных зависимостей,
- невозможность формального аудита,
- переписывание архитектуры «по живому».

Эта архитектура направлена **не на оптимальность**,  
а на **предотвращение расползания структуры**.

---

## 2. Ключевая идея: архитектура — это не модули, а взаимодействия

Система рассматривается **не как набор модулей**,  
а как **набор допустимых форм взаимодействия**.

Модули:
- могут появляться,
- исчезать,
- переименовываться,
- объединяться.

Формы взаимодействия — **нет**.

Архитектура считается устойчивой, если:
- роли и границы взаимодействий остаются неизменными,
- добавление нового модуля не требует пересмотра существующих ролей.

---

## 3. Роли как первичный строительный материал

В системе выделяются **абстрактные роли**, а не конкретные модули.

Примеры ролей (не исчерпывающий список):
- Наблюдатель (Observer)
- Принимающий решение (Decision Maker)
- Арбитр (Arbiter)
- Исполнитель (Executor)
- Источник обратной связи (Feedback Source)

Один модуль может:
- реализовывать несколько ролей,
- или только часть роли.

Но:
- роли не должны смешиваться логически,
- границы ролей важнее физического расположения кода.

---

## 4. Данные важнее логики

Архитектура строится вокруг **типов данных и направлений их движения**,  
а не вокруг алгоритмов.

Ключевые типы данных:
- снимки состояния (snapshots),
- намерения (intents),
- результаты исполнения (execution results),
- обратная связь (feedback).

Принцип:
> **Если понятно, какие данные кто имеет право создавать и читать —  
> логика становится вторичной.**

---

## 5. Снимок как базовая единица реальности

Все входы между ролями передаются в виде **снимков**:

- снимок — это неизменяемое состояние,
- снимок не содержит логики,
- снимок не содержит ссылок на внешнюю среду.

Это обеспечивает:
- детерминизм,
- тестируемость,
- воспроизводимость,
- отсутствие скрытых зависимостей.

---

## 6. Намерение вместо приказа

Решения в системе выражаются **в виде намерений**, а не команд.

Намерение:
- описывает желаемое действие,
- не гарантирует исполнения,
- не содержит механики реализации.

Это позволяет:
- разделить мышление и исполнение,
- вводить арбитраж и риск-контроль,
- менять execution layer без переписывания логики решений.

---

## 7. Обратная связь как отдельный поток

Результат действий системы возвращается в виде **обратной связи**, а не прямого состояния.

Обратная связь:
- описывает факты,
- не раскрывает внутреннюю механику исполнения,
- используется для адаптации поведения, а не для управления процессом.

---

## 8. Отрицательное пространство архитектуры

Архитектура определяется не только тем, **что разрешено**,  
но и тем, **что принципиально запрещено**.

Критически важно фиксировать:
- какие знания модуль НЕ может иметь,
- какие зависимости недопустимы,
- какие роли не могут совмещаться.

Это мышление «от запретов» является ключом к устойчивости системы.

---

## 9. Разделение документов

Архитектура сознательно разделяется на два уровня документов:

### Foundation
- объясняет подход,
- фиксирует мышление,
- допускает обсуждение и эволюцию.

### SSP (Sacred System Pact)
- фиксирует закон,
- используется для аудита,
- не объясняет и не оправдывает.

Foundation отвечает на «почему».  
SSP отвечает на «разрешено / запрещено».

---

## 10. Принцип неизбежности изменений

Изменения в системе неизбежны.

Архитектура считается успешной, если:
- изменения локализуются,
- новые модули не требуют пересмотра законов,
- рост сложности не увеличивает когнитивную нагрузку экспоненциально.

---

## 11. Финальное утверждение

Этот документ не гарантирует:
- прибыльности,
- оптимальности,
- простоты реализации.

Он предназначен для одного:
> **Сохранить контроль над системой, когда она станет слишком большой для удержания в голове одного человека.**

---

**End of ARCHITECTURAL FOUNDATION**
