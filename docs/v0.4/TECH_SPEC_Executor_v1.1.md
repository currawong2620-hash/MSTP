# üü• TECH SPEC ‚Äî Executor v1.1 (REAL)

**–ü—Ä–æ–µ–∫—Ç:** Trading Platform (MQL5)
**–ü–æ–¥—Å–∏—Å—Ç–µ–º–∞:** Execution
**–†–æ–ª—å:** `Executor`
**–í–µ—Ä—Å–∏—è:** v1.0
**–°—Ç–∞—Ç—É—Å:** Draft ‚Üí Master-Chat approval

**–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è –±–∞–∑–∞:**
SSP **v1.0**, CONTRACT_LEXICON **v1.1**, NAMING_RULES v1.0,
ROLE_CALL_CONTRACTS_MQL5 v0.1, Architecture Data Flow Model v1.0,
Visual Observability Model v1.0

---

## 0. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

`Executor` –≤—ã–ø–æ–ª–Ω—è–µ—Ç **–ø–æ–ø—ã—Ç–∫—É –±—É–∫–≤–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã**,
–∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤ `Decision`,
–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç **—Ñ–∞–∫—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è** –≤ `ExecutionResult`.

`Executor`:

* **–ù–ï –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–π**
* **–ù–ï –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ**
* **–ù–ï —á–∏—Ç–∞–µ—Ç** `Snapshot`, `Intent`, `PolicyAdjustedIntent`, `Feedback`
* **–Ø–í–õ–Ø–ï–¢–°–Ø –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π —Ä–æ–ª—å—é**, –∏–º–µ—é—â–µ–π –ø—Ä–∞–≤–æ –≤—ã–∑—ã–≤–∞—Ç—å MT5 trade API

---

## 1. –ü—É–±–ª–∏—á–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç (–ù–û–†–ú–ê–¢–ò–í–ù–û)

```mq5
void Executor_Run(
    const Decision &decision,
    ExecutionResult &out_result
);
```

–°–∏–≥–Ω–∞—Ç—É—Ä–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞.
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–µ—â–µ–Ω—ã.

---

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è —Ä–æ–ª–∏

### 2.1 –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
RiskArbiter ‚Üí Decision ‚Üí Executor ‚Üí ExecutionResult
```

`Decision` —è–≤–ª—è–µ—Ç—Å—è **–ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ú –≤—Ö–æ–¥–æ–º Executor**.
`ExecutionResult` ‚Äî **–ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ô –≤—ã—Ö–æ–¥**.

---

### 2.2 –û–±–ª–∞—Å—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ Executor

Executor –æ—Ç–≤–µ—á–∞–µ—Ç **–¢–û–õ–¨–ö–û** –∑–∞:

* **–±—É–∫–≤–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ `Decision` –∫–∞–∫ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã**
  **–±–µ–∑ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏**
* –æ–¥–Ω—É –ø–æ–ø—ã—Ç–∫—É –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ MT5
* —Ñ–∏–∫—Å–∞—Ü–∏—é **—Ñ–∞–∫—Ç–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞**

Executor **–ù–ï –æ—Ç–≤–µ—á–∞–µ—Ç** –∑–∞:

* –¥–æ–ø—É—Å—Ç–∏–º–æ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
* —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π —Å–º—ã—Å–ª –¥–µ–π—Å—Ç–≤–∏—è
* –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
* –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
* –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–∏—á–∏–Ω –æ—Ç–∫–∞–∑–∞

---

## 3. –í—Ö–æ–¥–Ω–æ–π —Ç–∏–ø: Decision (—Å—Ç—Ä–æ–≥–æ –ø–æ Lexicon v1.1)

### 3.1 –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è

Executor **–ò–°–ü–û–õ–¨–ó–£–ï–¢ –¢–û–õ–¨–ö–û**:

* `status`
* `action`
* `direction`
* `volume`
* `symbol`

–ü–æ–ª–µ `reason` **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ª–æ–≥–∏–∫–∏**.

---

### 3.2 –£—Å–ª–æ–≤–∏—è –≤—ã–∑–æ–≤–∞ Executor (–ö–†–ò–¢–ò–ß–ï–°–ö–ò)

#### `Decision.status = REJECT`

* `Executor_Run` **–ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è**
* `Executor` **–ù–ï —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç** `ExecutionResult`
* —Ñ–∞–∫—Ç –∑–∞–ø—Ä–µ—Ç–∞ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è **–≤–Ω–µ Executor**

---

#### `Decision.status = ACCEPT | MODIFY`

* `Executor_Run` **–û–ë–Ø–ó–ê–ù –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω**
* —Ä–∞–∑–ª–∏—á–∏–π –º–µ–∂–¥—É `ACCEPT` –∏ `MODIFY` –¥–ª—è Executor **–ù–ï –°–£–©–ï–°–¢–í–£–ï–¢**

---

## 4. –°–µ–º–∞–Ω—Ç–∏–∫–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è (–ù–û–†–ú–ê–¢–ò–í–ù–û)

### 4.1 `Decision.action`

| action | –ü–æ–≤–µ–¥–µ–Ω–∏–µ Executor      |
| ------ | ----------------------- |
| OPEN   | –ø–æ–ø—ã—Ç–∫–∞ –æ—Ç–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é |
| CLOSE  | –ø–æ–ø—ã—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é |

---

### 4.2 `Decision.direction`

* **–û–ë–Ø–ó–ê–¢–ï–õ–ï–ù** –ø—Ä–∏ `action = OPEN`
* **–î–û–õ–ñ–ï–ù –ë–´–¢–¨ = 0** –ø—Ä–∏ `action = CLOSE`

Executor:

> **–Ω–µ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å–µ–º–∞–Ω—Ç–∏–∫—É –∑–Ω–∞—á–µ–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ –Ω–∞–ø—Ä—è–º—É—é
> –≤ –≤—ã–∑–æ–≤–µ MT5 trade API**

Executor **–Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏–∫–∏**,
**–Ω–µ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è**
–∏ **–Ω–µ –¥–µ–ª–∞–µ—Ç –≤—ã–≤–æ–¥–æ–≤ –æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞**.

---

### 4.3 `Decision.volume`

Executor –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:

> **`Decision.volume` –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–æ–ø—É—Å—Ç–∏–º—ã–π –æ–±—ä—ë–º –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è**

* –æ–±—ä—ë–º **–ù–ï –∏–∑–º–µ–Ω—è–µ—Ç—Å—è**
* —Ä–∞–∑–ª–∏—á–∏–µ `ACCEPT / MODIFY` **–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è**
* –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –æ–±—ä—ë–º–∞ **–Ω–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è**

---

### 4.4 `Decision.symbol`

* Executor –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–¢–û–õ–¨–ö–û `Decision.symbol`**
* `_Symbol` –Ω–µ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## 5. MT5 Execution Rules

* **–æ–¥–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è**
* **–±–µ–∑ retry**
* **–±–µ–∑ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏**
* **–±–µ–∑ –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—è**
* **–±–µ–∑ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—â–µ–π –ª–æ–≥–∏–∫–∏**

---

## 6. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ ExecutionResult (–§–ê–ö–¢–û–õ–û–ì–ò–Ø)

### 6.1 –û–±—â–∏–π –ø—Ä–∏–Ω—Ü–∏–ø

`ExecutionResult` —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç **–¢–û–õ–¨–ö–û —Ñ–∞–∫—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è**.
–ü—Ä–∏—á–∏–Ω—ã –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è **–ù–ï –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É—é—Ç—Å—è**.

---

### 6.2 Mapping MT5 ‚Üí execution_status

| –§–∞–∫—Ç MT5                         | ExecutionResult.status |
| -------------------------------- | ---------------------- |
| –ü–æ–ª–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ                | `EXECUTED`             |
| –ß–∞—Å—Ç–∏—á–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ             | `PARTIAL`              |
| –û—Ç–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ         | `REJECTED`             |
| –õ—é–±–æ–π —Ñ–∞–∫—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è | `FAILED`               |

> `FAILED` –æ–∑–Ω–∞—á–∞–µ—Ç **‚Äú–Ω–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–æ‚Äù**
> –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ø—Ä–∏—á–∏–Ω—ã (requote, off quotes, no prices –∏ —Ç.–¥.)

---

### 6.3 –ü–æ–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

* `filled_volume` ‚Äî —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –æ–±—ä—ë–º (0 –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–æ)
* `price` ‚Äî —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ü–µ–Ω–∞ (0 –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–æ)

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è **–ó–ê–ü–†–ï–©–ï–ù–´**.

---

## 7. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∑–∞–ø—Ä–µ—Ç—ã (–ñ–Å–°–¢–ö–û)

Executor **–ù–ï –ò–ú–ï–ï–¢ –ü–†–ê–í–ê**:

* —á–∏—Ç–∞—Ç—å `Snapshot`
* —á–∏—Ç–∞—Ç—å `Intent`
* —á–∏—Ç–∞—Ç—å `PolicyAdjustedIntent`
* —á–∏—Ç–∞—Ç—å `Feedback`
* –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å `Decision.reason`
* –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è
* –ø–æ–≤—Ç–æ—Ä—è—Ç—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ
* —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

---

## 8. Visual Observability

### 8.1 Execution Facts Stream

–î–ª—è —Ä–æ–ª–∏ `Executor` –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω Visual Tester,
–≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π **–¢–û–õ–¨–ö–û `ExecutionResult`**.

* read-only
* –±–µ–∑ –ª–æ–≥–∏–∫–∏
* –±–µ–∑ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
* –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ

---

## 9. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ (AUDIT)

–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π, –µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:

* ‚ùè –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Ç–æ–ª—å–∫–æ** –ø–æ–ª—è `Decision` (–ø.3.1)
* ‚ùè –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ `Decision.status = REJECT`
* ‚ùè –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `Decision.volume` –∫–∞–∫ –µ—Å—Ç—å
* ‚ùè –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `Decision.direction` –Ω–∞–ø—Ä—è–º—É—é –≤ MT5 API
* ‚ùè —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç `ExecutionResult` —Å—Ç—Ä–æ–≥–æ –ø–æ Lexicon v1.1
* ‚ùè —Ç—Ä–∞–∫—Ç—É–µ—Ç `FAILED` –∫–∞–∫ —Ñ–∞–∫—Ç –Ω–µ–∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
* ‚ùè –Ω–µ —á–∏—Ç–∞–µ—Ç –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã
* ‚ùè –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫–∏ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

---

## 10. Freeze Rule

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–∏—ë–º–∫–∏:

> üîí **Executor v1.0 (REAL) –∑–∞–º–æ—Ä–∞–∂–∏–≤–∞–µ—Ç—Å—è**

–õ—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è ‚Üí –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è Lexicon + –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è Executor.

---

**END OF TECH SPEC ‚Äî Executor v1.0 (REAL)**

---

### –°—Ç–∞—Ç—É—Å

–ü–æ—Å–ª–µ —ç—Ç–æ–π —Ä–µ–¥–∞–∫—Ü–∏–∏:

* ‚úÖ –æ–±–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–º–µ—á–∞–Ω–∏—è –∑–∞–∫—Ä—ã—Ç—ã
* ‚úÖ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —É—Ç–µ—á–∫–∞ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞
* ‚úÖ –≤–µ—Ä—Å–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã
* üü¢ **–ì–æ—Ç–æ–≤–æ –∫ Master-Chat approval**
